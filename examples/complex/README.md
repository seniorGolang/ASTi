# Комплексные тесты для AST Interface Parser

Данная директория содержит комплексные тесты для библиотеки парсинга Go интерфейсов, покрывающие все возможные корнер
кейсы и сложные сценарии.

## Структура тестов

### 1. Сложные импорты (`complex_imports/`)

Тестирует парсинг сложных импортов с множественными алиасами:

- Множественные алиасы для одного пакета (`sql`, `sqlpkg`, `db`)
- Алиасы для стандартных пакетов (`json`, `jsonpkg`)
- Локальные импорты с алиасами (`models`, `astimodels`)
- Методы с различными типами из алиасов

### 2. Циклические структуры (`cyclic_structures/`)

Тестирует парсинг циклических и рекурсивных структур:

- Структуры с циклическими ссылками (`Node` с `Parent` и `Children`)
- Сложные графы с матрицами и картами карт
- Рекурсивные типы с самореференсами
- Методы с циклическими типами

### 3. Дженерики (`generic_types/`)

Тестирует парсинг дженериков и сложных типов:

- Дженерик контейнеры (`GenericContainer[T]`)
- Сложные дженерики с множественными параметрами
- Дженерик узлы с циклическими ссылками
- Методы с дженерик типами

### 4. Вложенные типы (`nested_types/`)

Тестирует парсинг глубоко вложенных типов:

- Структуры с 5 уровнями вложенности
- Сложные слайсы и карты (`[][][][][]interface{}`)
- Встроенные интерфейсы в структурах
- Функциональные типы и каналы

### 5. Продвинутые аннотации (`advanced_annotations/`)

Тестирует парсинг сложных аннотаций:

- Множественные аннотации на пакете
- Сложные аннотации с валидацией
- Перечисления с аннотациями
- Методы с множественными аннотациями

### 6. Корнер кейсы (`corner_cases/`)

Тестирует граничные случаи:

- Пустые структуры
- Указатели на все типы
- Массивы и слайсы
- Карты и каналы
- Встроенные структуры
- Структуры с тегами

### 7. Граничные случаи (`edge_cases/`)

Тестирует обработку ошибок и невалидных случаев:

- Интерфейсы без аннотаций (должны быть пропущены)
- Методы без `context.Context` (должны быть пропущены)
- Методы без `error` (должны быть пропущены)
- Очень длинные имена
- Множественные аннотации
- Специальные символы в аннотациях

## Запуск тестов

### Основные тесты

```bash
cd examples/complex_test_cases
go test -v
```

### Тесты производительности

```bash
go test -v -run TestPerformance
```

### Стресс-тесты

```bash
go test -v -run TestStress
```

### Тесты памяти

```bash
go test -v -run TestMemory
```

### Все тесты с покрытием

```bash
go test -v -cover
```

## Покрываемые сценарии

### 1. Парсинг интерфейсов

- ✅ Интерфейсы с аннотациями
- ✅ Интерфейсы без аннотаций (пропуск)
- ✅ Интерфейсы с множественными аннотациями
- ✅ Интерфейсы с очень длинными именами

### 2. Парсинг методов

- ✅ Методы с `context.Context` как первый параметр
- ✅ Методы с `error` как последний результат
- ✅ Методы с именованными параметрами и результатами
- ✅ Методы с множественными аннотациями
- ✅ Методы с очень длинными именами

### 3. Парсинг типов

- ✅ Базовые типы (`string`, `int`, `bool`)
- ✅ Указатели (`*string`, `*int`)
- ✅ Слайсы (`[]string`, `[][]int`)
- ✅ Карты (`map[string]int`, `map[string]map[string]interface{}`)
- ✅ Массивы (`[5]int`, `[10]string`)
- ✅ Каналы (`chan string`, `chan<- string`, `<-chan string`)
- ✅ Интерфейсы (`interface{}`, встроенные интерфейсы)
- ✅ Функции (`func()`, `func(string) error`)
- ✅ Дженерики (`GenericContainer[T]`)
- ✅ Циклические ссылки (`*Node`)

### 4. Парсинг аннотаций

- ✅ Аннотации пакета
- ✅ Аннотации интерфейсов
- ✅ Аннотации методов
- ✅ Аннотации типов
- ✅ Аннотации полей
- ✅ Множественные аннотации
- ✅ Специальные символы в аннотациях
- ✅ Очень длинные значения аннотаций

### 5. Валидация

- ✅ Проверка обязательных аннотаций
- ✅ Проверка `context.Context` как первого параметра
- ✅ Проверка `error` как последнего результата
- ✅ Проверка именованных параметров и результатов
- ✅ Пропуск невалидных интерфейсов

### 6. JSON сериализация

- ✅ Сериализация в JSON
- ✅ Десериализация из JSON
- ✅ Проверка валидности JSON
- ✅ Проверка целостности данных

### 7. Производительность

- ✅ Время парсинга
- ✅ Использование памяти
- ✅ Конкурентная обработка
- ✅ Стресс-тестирование
- ✅ Повторное использование парсера

## Ожидаемые результаты

### Успешные тесты

- Все валидные интерфейсы должны быть найдены
- Все типы должны быть собраны
- Все аннотации должны быть распарсены
- JSON сериализация должна работать корректно
- Производительность должна быть приемлемой

### Пропущенные элементы

- Интерфейсы без аннотаций
- Методы без `context.Context`
- Методы без `error`
- Неименованные параметры и результаты

### Обработка ошибок

- Несуществующие пакеты
- Пустые директории
- Некорректные аннотации
- Синтаксические ошибки

## Добавление новых тестов

Для добавления новых тестов:

1. Создайте новую директорию в `examples/complex_test_cases/`
2. Добавьте Go файл с тестовыми интерфейсами
3. Добавьте тест в `complex_test.go`
4. Обновите списки пакетов в тестах
5. Запустите тесты для проверки

## Требования к тестам

- Все интерфейсы должны иметь аннотации
- Все методы должны начинаться с `context.Context`
- Все методы должны заканчиваться `error`
- Все параметры и результаты должны быть именованными
- Тесты должны быть детерминированными
- Тесты должны проверять как успешные, так и неуспешные случаи
